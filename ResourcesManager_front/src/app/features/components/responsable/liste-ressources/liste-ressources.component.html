<div class="container-fluid">

    <div class="row">
        <div class="col-lg-12">
            <div class="card-box">
                <h4 class="header-title mb-3">Liste des ressources</h4>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card-box">

                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                    <a href="#home" data-toggle="tab" aria-expanded="false" class="nav-link active">
                                        <i class="fi-monitor mr-2"></i> Ordinateur
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#profile" data-toggle="tab" aria-expanded="true" class="nav-link ">
                                        
                                        <i class="fi-printer pr-2"></i> Imprimante
                                    </a>
                                </li>

                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane show active" id="home">
                                    <div class="container-fluid">

                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="card-box">
                                                    <h4 class="header-title mb-3">Liste des Ordinateurs</h4>

                                                    <div class="table-responsive">
                                                        <div class="mb-3">
                                                            <div class="row">
                                                              <div class="col-12 text-sm-center form-inline">
                                                                <div class="form-group mr-2">
                                                                  <select id="demo-foo-filter-status" class="custom-select" [(ngModel)]="selectedStatus1" (ngModelChange)="onStatusSelected(selectedStatus1)">
                                                                    <option value="">Show all</option>
                                                                    <option value="available">Available</option>
                                                                    <option value="unavailable">Unvailable</option>
                                                                    <option value="processing">Processing</option>
                                                                  </select>
                                                                </div>
                                                                <div class="form-group">
                                                                  <input
                                                                    id="demo-foo-search"
                                                                    type="text"
                                                                    placeholder="Search"
                                                                    class="form-control"
                                                                    autocomplete="on"
                                                                  />
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        <table id="demo-foo-filtering"
                                                        class="table table-striped table-bordered toggle-circle m-b-0"
                                                        data-page-size="10">

                                                            <thead>
                                                                <tr>
                                                                    <th>Code bar</th>
                                                                    <th>Marque </th>
                                                                    <th>Date de Demande</th>
                                                                    <th>Date Livraison</th>
                                                                    <!--<th>RAM</th>-->
                                                                    <th>Disque Dur</th>
                                                                    <th>CPU</th>
                                                                    <th>Etat</th>
                                                                    <th class="text-center">Actions</th>
                                                                   
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let computer of computers$ | async">
                                                                    <td>
                                                                        <span *ngIf="computer.barCode == null">null</span>
                                                                      {{computer.barCode.substring(0, 8) + "..."}}
                                                                      
                                                                    </td>
                                                                    <td>
                                                                        <span *ngIf="computer.brand == null">null</span>
                                                                        {{computer.brand}}
                                                                    </td>
                                                                    <td>
                                                                        {{computer.dateOfRequest | date:'yyyy-MM-dd' }}
                                                                    </td>
                                                                    <td>
                                                                        <span *ngIf="computer.deliveryDate == null">null</span>
                                                                        {{computer.deliveryDate | date:'yyyy-MM-dd' }}
                                                                    </td>
                                                                    <!--<td>
                                                                        {{computer.ram}}
                                        
                                                                    </td>-->
                                                                    <td>
                                                                        {{computer.disk}}
                                        
                                                                    </td>
                                                                    <td>
                                                                        {{computer.cpu}}
                                                                    </td>
                                                                    
                                                                    <td style="">
                                                                        <span
                                                                          *ngIf="computer.state == -1"
                                                                          class="badge label-table badge-danger">Non Disponible</span>
                                                                        <span
                                                                          *ngIf="computer.state == 0"
                                                                          class="badge label-table badge-warning"
                                                                          >Traitement</span>
                                                                        <span
                                                                          *ngIf="computer.state == 1"
                                                                          class="badge label-table badge-success"
                                                                          >Disponible</span>
                                                                      </td>
                                                                      <td class="text-center">
                                                                        <button [disabled]="computer.state !==1" (click)="onConsultResource(computer.id, 'computer')" 
                                                                        class="btn btn-sm btn-warning mr-1">
                                                                        <i class="fa fa-eye"></i>  </button>

                                                                        <button (click)="getAffectation(computer)"  data-toggle="modal" data-target="#affectation" 
                                                                            class="btn btn-sm btn-custom ml-1"> <i class="fi-head"></i></button>
                                                                        
                                                                    </td> 

                                                                </tr>


                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="profile">
                                    <div class="container-fluid">



                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="card-box">
                                                    <h4 class="header-title mb-3">Liste des Imprimantes</h4>

                                                    <div class="table-responsive">

                                                        <div class="mb-3">
                                                            <div class="row">
                                                              <div class="col-12 text-sm-center form-inline">
                                                                <div class="form-group mr-2">
                                                                  <select id="demo-foo-filter-status" class="custom-select" [(ngModel)]="selectedStatus2" (ngModelChange)="onStatusSelected(selectedStatus2)">
                                                                    <option value="">Show all</option>
                                                                    <option value="available">Available</option>
                                                                    <option value="unavailable">Unvailable</option>
                                                                    <option value="processing">Processing</option>
                                                                  </select>
                                                                </div>
                                                                <div class="form-group">
                                                                  <input
                                                                    id="demo-foo-search"
                                                                    type="text"
                                                                    placeholder="Search"
                                                                    class="form-control"
                                                                    autocomplete="on"
                                                                  />
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>

                                                        <table id="demo-foo-filtering"
                                                        class="table table-striped table-bordered toggle-circle m-b-0"
                                                        data-page-size="10">

                                                            <thead>
                                                                <tr>
                                                                    <th>Code bar</th>
                                                                    <th>Marque</th>
                                                                    <th>Date de Demande</th>
                                                                    <th>Date Livraison</th>
                                                                    <th>Resolution</th>
                                                                    <th>Vitesse</th>
                                                                    <th>Etat</th>
                                                                    <th class="text-center">Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr *ngFor="let printer of printers$ | async">
                                                                    <td>
                                                                        {{printer.barCode.substring(0, 8) + "..."}}
                                                                        <span *ngIf="printer.barCode == null">null</span>
                                                                    </td>
                                                                    <td>
                                                                        <span *ngIf="printer.brand == null">null</span>
                                                                        {{printer.brand}}
                                                                    </td>
                                                                    <td>
                                                                        {{printer.dateOfRequest | date:'yyyy-MM-dd' }}
                                                                    </td>
                                                                    <td>
                                                                        <span *ngIf="printer.deliveryDate == null">null</span>
                                                                        {{printer.deliveryDate | date:'yyyy-MM-dd' }}
                                                                    </td>
                                                                    <td>
                                                                        {{printer.resolution}}
                                                                    </td>
                                                                    <td>
                                                                        {{printer.printSpeed}}
                                                                    </td>
                                                                    
                                                                    <td style="">
                                                                        <span
                                                                          *ngIf="printer.state == -1"
                                                                          class="badge label-table badge-danger">Non Disponible</span>
                                                                        <span
                                                                          *ngIf="printer.state == 0"
                                                                          class="badge label-table badge-warning"
                                                                          >Traitement</span>
                                                                        <span
                                                                          *ngIf="printer.state == 1"
                                                                          class="badge label-table badge-success"
                                                                          >Disponible</span>
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <button [disabled]="printer.state !==1" (click)="onConsultResource(printer.id, 'printer')" class="btn btn-sm btn-warning mr-1">
                                                                            <i class="fa fa-eye"></i>  
                                                                        </button>
                                                                    
                                                                        <button (click)="getAffectation(printer)" data-toggle="modal" data-target="#affectation" class="btn btn-sm btn-custom ml-1">
                                                                            <i class="fi-head"></i>
                                                                        </button>
                                                                    </td>
                                                                </tr>


                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div> <!-- end col -->

                </div>

            </div>

        </div>
    </div>
 

<!-- affectation de ressource -->
   <!-- Signup modal content -->
   <div id="affectation" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="custom-width-modalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body">
                <h2 class="text-uppercase text-center m-b-30">
                    <a href="index.html" class="text-success">
                        <span><img src="assets/images/logo.png" alt="" height="28"></span>
                    </a>
                </h2>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card-box">
                            <h4 class="m-t-0 header-title">Affectation de ressource</h4>
                            <p class="text-muted m-b-30 font-13">
                                Ajouter ou supprimer un enseignant de la liste des affectations.
                            </p>

                            <div class="mb-3">
                                <div class="row">
                                    
                                    <div class="col-md-4">
                                        <div class="form-group">
                                          <label for="department-select">Département:</label>
                                          <select id="department-select" class="form-control" [(ngModel)]="selectedDepartment" (change)="onDepartmentSelect()">
                                            <option *ngFor="let department of departments$ | async" [value]="department">{{ department }}</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="col-md-4">
                                        <div class="form-group">
                                          <label for="teacher-select">Enseignant:</label>
                                          <select id="teacher-select" class="form-control" [(ngModel)]="selectedTeacher"> 
                                            <option *ngFor="let teacher of teachers$ | async" [ngValue]="teacher">{{ teacher.firstName }} {{ teacher.lastName }}</option>                           
                                          </select>
                                        </div>
                                      </div>
                                     
                                    </div>
                                    <button class="btn btn-primary" (click)="addTeacher()">Ajouter </button>
                                   

                                </div>
                            </div>

                            <table id="demo-foo-addrow" class="table table-striped table-bordered m-b-0 toggle-circle footable-loaded footable tablet breakpoint" data-page-size="7">
                                <thead>
                                <tr>
                                    <th data-sort-ignore="true" class="min-width footable-visible footable-first-column"></th>
                                    <th data-sort-initial="true" data-toggle="true" class="footable-visible footable-sortable">Département<span class="footable-sort-indicator"></span></th>
                                    <th class="footable-visible footable-sortable">Prénom<span class="footable-sort-indicator"></span></th>
                                    <th class="footable-visible footable-sortable">Nom<span class="footable-sort-indicator"></span></th>
                                    <th class="footable-visible footable-sortable">Date d'affectation<span class="footable-sort-indicator"></span></th>
                                    <th data-hide="phone, tablet" class="footable-sortable" style="display: none;">Email<span class="footable-sort-indicator"></span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <ng-container *ngIf="(affectation$ | async) as affectation">
                                
                                <tr class="footable-even" style="" *ngFor="let teacher of affectation.teacherList">
                                    <td class="text-center footable-visible footable-first-column"><button class="demo-delete-row btn btn-danger btn-sm btn-icon" (click)="deleteTeacher(teacher)" ><i class="fa fa-times"></i></button></td>
                                    <td class="footable-visible"><span class="footable-toggle"></span> {{ teacher.department }}</td>
                                    <td class="footable-visible">{{teacher.firstName}}</td>
                                    <td class="footable-visible">{{teacher.lastName}}</td>
                                    <td class="footable-visible footable-last-column">{{affectation.dateAffectation | date: 'dd/MM/yyyy'}}</td>
                                    <td class="" style="display: none;">{{teacher.email}}</td>
                                </tr>
                            </ng-container>

                            </tbody>
                                <tfoot>
                                <tr class="active">
                                    <td colspan="6" class="footable-visible">
                                        <div class="text-right">
                                            <ul class="pagination pagination-split justify-content-end footable-pagination m-t-10"><li class="footable-page-arrow disabled"><a data-page="first" href="#first">«</a></li><li class="footable-page-arrow disabled"><a data-page="prev" href="#prev">‹</a></li><li class="footable-page active"><a data-page="0" href="#">1</a></li><li class="footable-page"><a data-page="1" href="#">2</a></li><li class="footable-page-arrow"><a data-page="next" href="#next">›</a></li><li class="footable-page-arrow"><a data-page="last" href="#last">»</a></li></ul>
                                        </div>
                                    </td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="modal-footer"> <button class="btn btn-primary" (click)="saveAffectation()">Enregistrer</button> </div>
                    </div>
 
                </div>
            </div>
            
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- end ajouter ressource -->







